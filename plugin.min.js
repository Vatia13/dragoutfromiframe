$.ui.draggable.prototype._generatePosition=function(t,e){var o,i,s,n,f=this.options,r=this._isRootNode(this.scrollParent[0]),a=t.pageX,l=t.pageY;r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),o=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):o=this.containment,t.pageX-this.offset.click.left<o[0]&&(a=o[0]+this.offset.click.left),t.pageY-this.offset.click.top<o[1]&&(l=o[1]+this.offset.click.top),t.pageX-this.offset.click.left>o[2]&&(a=o[2]+this.offset.click.left),t.pageY-this.offset.click.top>o[3]&&(l=o[3]+this.offset.click.top)),f.grid&&(s=f.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/f.grid[1])*f.grid[1]:this.originalPageY,l=o?s-this.offset.click.top>=o[1]||s-this.offset.click.top>o[3]?s:s-this.offset.click.top>=o[1]?s-f.grid[1]:s+f.grid[1]:s,n=f.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/f.grid[0])*f.grid[0]:this.originalPageX,a=o?n-this.offset.click.left>=o[0]||n-this.offset.click.left>o[2]?n:n-this.offset.click.left>=o[0]?n-f.grid[0]:n+f.grid[0]:n),"y"===f.axis&&(a=this.originalPageX),"x"===f.axis&&(l=this.originalPageY));var c=l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),g=a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left);return f.iframeFix&&(g=t.pageX+f.iframe.offset().left-15,c=t.pageY+f.iframe.offset().top-15),{top:c,left:g}},$.fn.dragOutFromIframe=function(t){var e=$.extend({document:$("body"),target:"",draggable:{cancel:"a.ui-icon",containment:"document",cursor:"move",helper:"clone",iframeFix:!0,revert:!0,cursorAt:{top:61,left:61},drag:function(t,e){e.helper.show()},stop:function(){e.clone.remove()}}},t);$(this)[0].onload=function(t){var o=$(this),i=!1,s=t.target.contentDocument||t.target.contentWindow.document;$(s).on({mousemove:function(t){$(document).trigger(t)},mousedown:function(t){$(document).trigger(t)},mouseup:function(t){$(document).trigger(t)}}),$(s).find(e.target).on("mouseup",function(){$(this).removeClass("mouse-down")}),$(s).find(e.target).on("mousedown",function(t){if(e.target=$(this),!i)return t.preventDefault(),t.stopPropagation(),i=!0,e.target.addClass("mouse-down"),$(t.target).data("drag")?(i=!1,!1):(e.clone=e.target.clone(),e.document.prepend(e.clone),e.clone.hide(),e.draggable.iframe=o,e.clone.draggable(e.draggable),setTimeout(function(){e.target.hasClass("mouse-down")&&e.clone.simulate("mousedown"),i=!1},100),!1)})}};